// JavaScript Document
var isValidate=!0,checkForm=function(){var n=$("input[name='password']"),t=$("input[name='newPassword']"),i=$("input[name='confirmPassword']");return n.val()==""?(n.next("span").text("请输入旧密码"),!1):t.val()==""?(t.next("span").text("请输入新密码"),!1):i.val()==""?(i.next("span").text("请输入确认密码"),!1):!0};$(function(){$("input[name='password']").blur(function(){var n=$(this);n.val()!=""&&(n.val().length<6||n.val().length>20?(n.next("span").text("密码长度在6~20之间"),isValidate=!1):(n.next("span").text(""),isValidate=!0))});$("input[name='newPassword']").blur(function(){var n=$(this),i,t;n.val()!=""&&(n.val().length<6||n.val().length>20?(n.next("span").text("密码长度在6~20之间"),isValidate=!1):(n.next("span").text(""),isValidate=!0,n.val()!=""&&(i=$("input[name='password']").val(),t=$("input[name='confirmPassword']").val(),n.val()==i?(n.next("span").text("新密码不能与旧密码一样"),isValidate=!1):t!=""&&(n.val()!=t?(n.next("span").text("两次输入不一致"),isValidate=!1):(n.next("span").text(""),$("input[name='confirmPassword']").text(""),isValidate=!0)))))}).focus(function(){if($(this).val()!=""){var n=$("input[name='password']").val();$(this).val()==n?($(this).next("span").text("新密码不能与旧密码一样"),isValidate=!1):($(this).next("span").text(""),$("input[name='confirmPassword']").text(""),isValidate=!0)}});$("input[name='confirmPassword']").blur(function(){var n=$(this),t;n.val()!=""&&(n.val().length<6||n.val().length>20?(n.next("span").text("密码长度在6~20之间"),isValidate=!1):(n.next("span").text(""),isValidate=!0,t=$("input[name='newPassword']").val(),$(this).val()!=t?($(this).next("span").text("两次输入不一致"),isValidate=!1):($(this).next("span").text(""),$("input[name='newPassword']").next("span").text(""),isValidate=!0)))}).focus(function(){if($(this).val()!=""){var n=$("input[name='newPassword']").val();$(this).val()!=n?($(this).next("span").text("两次输入不一致"),isValidate=!1):($(this).next("span").text(""),$("input[name='newPassword']").next("span").text(""),isValidate=!0)}});$("#btnSubmit").click(function(){checkForm()&&isValidate&&$.ajax({url:"/User/Home/SavePassword",data:{Password:$.md5($("#oldPassword").val()),NewPassword:$.md5($("#newPassword").val())},type:"POST",cache:!1,dataType:"json",success:function(n){n.isSuccess?location.href="../../Login/LogOut":BootstrapDialog.alert({title:"错误提示",message:n.errMsg})}})})});